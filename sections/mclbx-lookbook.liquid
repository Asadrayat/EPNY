{% liquid
  assign id = section.id
%}
{% assign category_blocks = section.blocks | where: 'type', 'category' %}
<style>
        #shopify-section-{{id}} {
          box-sizing: border-box;
          margin-top: {{section.settings.margin_top | append: 'px'}};
          margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
          padding-top: {{section.settings.padding_top | append: 'px'}};
          padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
        }


        @media(max-width: 600px) {
          #shopify-section-{{id}} {
            margin-top: {{section.settings.margin_top_m | append: 'px'}};
            margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
            padding-top: {{section.settings.padding_top_m | append: 'px'}};
            padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
          }
        }

      .sec-{{ id }} {
.wrapper-{{ id }} {
    display: flex;
    flex-direction: column;
    gap: var(--Spacing-Container-md, 16px);
}
      .--top-block {
          display: flex;
          gap: var(--Spacing-Container-xxs);
          flex-direction: column;
          justify-content: space-between;
          align-items: center;
          text-align: center;
          padding-block:0 calc(var(--Spacing-Section-Section-Vertical-Padding, 24px)/2);
          @media(max-width: 600px){
            gap: var(--Spacing-Container-xs);
            /* margin-bottom: var(--Spacing-Container-sm); */
          }
      }
        h2.--section-title {
          margin-block: 0;
          color: var(--Content-Base-main, #1F2937);
          font-family: var(--font-family-Title, "Aktiv Grotesk");
          font-size: var(--Font-Size-Heading-H1, 32px);
          font-style: normal;
          font-weight: 400;
          line-height: var(--Line-Height-Heading-H1, 32px);
          letter-spacing: -0.96px;
        }
      .--section-subtitle {
            color: var(--Content-Base-base, #4B5563);
            font-family: var(--font-family-Body, "Aktiv Grotesk");
            font-size: var(--Font-Size-Paragraph-Small, 14px);
            font-style: normal;
            font-weight: 400;
            line-height: var(--Line-Height-Paragraph-Small, 20px);
      }
/* Filter nav bar */
.--filter-elements {
    display: flex;
    gap: var(--Spacing-Container-lg, 40px);
}
.--filter-item {
    color: var(--Content-Base-base, #4B5563);
    /* text-align: center; */
    font-family: var(--font-family-Title, "Aktiv Grotesk");
    font-size: var(--Font-Size-Heading-H3, 20px);
    font-style: normal;
    font-weight: 400;
    line-height: var(--Line-Height-Heading-H3, 20px);
    letter-spacing: -0.4px;
    padding-bottom: var(--Spacing-Container-xxs, 8px);
    cursor: pointer;
}
.--filter-item.--active-content {
    color: #000;
    border-bottom: 1px solid var(--Border-Base-dense, #4B5563);
}
        
/* Filtered Content         */
.--filter-content-wrapper {
    display: none;
}
.--filter-content-wrapper.--active-content {
    display: block;
}




        
    .--image-grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--Spacing-Container-sm, 16px);
      @media(max-width: 768px){
          display: none;
        }
    }

        
    .--single-image-grid {
        display: grid;
        gap: var(--Spacing-Container-sm, 16px);
        grid-template-rows: repeat(5,1fr);

    }
    .--portrait-image {
        grid-row: span 3;
    }
    .--landscape-image {
        grid-row: span 2;
    }
    .--single-image-grid :is(img, svg) {
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          display: block;
      }

  /* Mobile Slider       */
.--image-slider-mobile {
  display: none;
  @media(max-width: 768px){
    display: block;
  }
    
}
  .--image-slider-mobile .--single-image :is(img, svg) {
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          display: block;
          aspect-ratio: 4/5;
      }
.--nav-icon {
    display: none;
}







      }
</style>

<div class="sec-{{ id }}">
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    <div class="wrapper-{{ id }}">
      <div class="--top-block">
        <h2 class="--section-title">{{ section.settings.title }}</h2>
        <div class="--section-subtitle">{{ section.settings.subtitle }}</div>
      </div>
      <div class="--filter-elements">
        {% for block in category_blocks %}
          <div class="--filter-item {% if forloop.first %}--active-content {% endif %}" data-title="{{ block.settings.title | downcase }}">{{ block.settings.title }}</div>
        {% endfor %}
      </div>

      <div class="filter-content-container">
        {% for category_block in category_blocks %}
          <div class="--filter-content-wrapper {% if forloop.first %}--active-content {% endif %} " data-title="{{ category_block.settings.title | downcase }}">
            
              
              <div class="--image-slider-mobile">
                <div class="swiper swiper-{{ section.id }}--{{ category_block.id }}">
                  <div class="swiper-wrapper">
                    {% for block in section.blocks %}
                      {% if block.type != 'category' and block.settings.title == category_block.settings.title %}
                        <div class="swiper-slide">
                          <div class="--single-image">
                            {% if block.settings.image != blank %}
                              {{ block.settings.image | image_url: width: block.settings.image.width | image_tag }}
                            {% else %}
                              {{ 'hero-apparel-1' | placeholder_svg_tag }}
                            {% endif %}
                          </div>
                        </div>
                        <div class="swiper-slide">
                          <div class="--single-image">
                            {% if block.settings.image_2 != blank %}
                              {{ block.settings.image_2 | image_url: width: block.settings.image_2.width | image_tag }}
                            {% else %}
                              {{ 'hero-apparel-2' | placeholder_svg_tag }}
                            {% endif %}
                          </div>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
                <div class="prev-{{ section.id }} --nav-icon">
                  {% render 'all-icons', name: 'left_arrow' %}
                </div>
                <div class="next-{{ section.id }} --nav-icon">
                  {% render 'all-icons', name: 'right_arrow' %}
                </div>
              </div>
              <div class="--image-grid-container -desktop">
                {% if block.type != 'category' and block.settings.title == category_block.settings.title %}
                {% endif %}
                {% for block in section.blocks %}
                  {% if block.type == 'image_portrait_first'
                    and block.settings.title == category_block.settings.title
                  %}
                    <div class="--portrait-first --single-image-grid">
                      <div class="--portrait-image">
                        {% if block.settings.image != blank %}
                          {{ block.settings.image | image_url: width: block.settings.image.width | image_tag }}
                        {% else %}
                          {{ 'hero-apparel-1' | placeholder_svg_tag }}
                        {% endif %}
                      </div>
                      <div class="--landscape-image">
                        {% if block.settings.image_2 != blank %}
                          {{ block.settings.image_2 | image_url: width: block.settings.image_2.width | image_tag }}
                        {% else %}
                          {{ 'hero-apparel-2' | placeholder_svg_tag }}
                        {% endif %}
                      </div>
                    </div>
                  {% elsif block.type == 'image_landscape_first'
                    and block.settings.title == category_block.settings.title
                  %}
                    <div class="--landscape-first --single-image-grid">
                      <div class="--landscape-image">
                        {% if block.settings.image != blank %}
                          {{ block.settings.image | image_url: width: block.settings.image.width | image_tag }}
                        {% else %}
                          {{ 'hero-apparel-1' | placeholder_svg_tag }}
                        {% endif %}
                      </div>
                      <div class=" --portrait-image">
                        {% if block.settings.image_2 != blank %}
                          {{ block.settings.image_2 | image_url: width: block.settings.image_2.width | image_tag }}
                        {% else %}
                          {{ 'hero-apparel-2' | placeholder_svg_tag }}
                        {% endif %}
                      </div>
                    </div>
                  {% endif %}
                {% endfor %}
              </div>
            
          </div>
        {% endfor %}
      </div>

    </div>
  </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {

    function initSwiper(classname,prev,next) {
      if(classname){
            new Swiper(classname, {
            slidesPerView: 1.2,
            spaceBetween: 12,
            autoHeight: true,
            touchMoveStopPropagation: true,
            // touchStartPropagation: false,
            // preventClicks: true,
            // preventClicksPropagation: true,
            // slideToClickedSlide: false,
            // allowTouchMove: false,
            navigation: {
              nextEl: next ,
              prevEl: prev
            },
            breakpoints: {
              600:{
                slidesPerView: 3,
                spaceBetween: 16
              }
            }
          });
      } else {
        console.log(" No class Found");
      }
    }
  
      {% for block in category_blocks %}
        initSwiper(".swiper-{{ section.id }}--{{ block.id }}",".prev-{{ section.id }}--{{ block.id }}",".next-{{ section.id }}--{{ block.id }}");
      {% endfor %}

        // window.addEventListener('resize', function() {
        //   {% for block in section.blocks %}
        //     // initmySwiper(".swiper-{{ section.id }}--{{ block.id }}");
        //     initmySwiper(".swiper-{{ section.id }}--{{ block.id }}",".prev-{{ section.id }}--{{ block.id }}",".next-{{ section.id }}--{{ block.id }}");
        //   {% endfor %}
        // });


        let tabContent = document.querySelectorAll('.--filter-content-wrapper');
        let tabTitles = document.querySelectorAll('.--filter-item');
        tabTitles.forEach((title) => {
          title.addEventListener('click', () => {
            // Remove active class from all titles
            tabTitles.forEach((x) => x.classList.remove('--active-content'));
            tabContent.forEach((x) =>{
              x.classList.remove('--active-content')
              if (x.dataset.title && title.dataset.title && x.dataset.title.trim() === title.dataset.title.trim()) {
                  x.classList.add('--active-content');
              }
            } );
            // Add active class to the clicked title
            title.classList.add('--active-content');
          });
        });

    });

    // Optional: Add an event listener to handle window resize events
</script>

{% schema %}
{
  "name": "Lookbook v2",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": false
    },
      {
      "type": "text",
      "id": "id_nav",
      "label": "Id for Navigtion"
    },
    {
      "type": "header",
      "content": "Section Content"
    },

    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 24
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 32
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name" : "Category",
      "limit": 5,
      "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Category"
          }
        ]
    },
    {
      "type": "image_portrait_first",
      "name": "Images (Portrait First)",
      "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Category"
          },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image 2"
        }
      ]
    },
    {
      "type": "image_landscape_first",
      "name": "Images (Landscape First)",
      "settings": [
         {
            "type": "text",
            "id": "title",
            "label": "Category"
          },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image 2"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lookbook v2",
      "blocks": [

      ]
    }
  ]
}
{% endschema %}
